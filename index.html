<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoDrive - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #1e3a8a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            padding: 0;
            overflow-x: hidden;
        }

        /* Top Navigation Bar */
        .top-nav {
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .logo img {
            height: 40px;
            width: auto;
            object-fit: contain;
            filter: brightness(0) invert(1);
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .logo:hover img {
            opacity: 1;
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-button {
            background: rgba(51, 65, 85, 0.6);
            border: 1px solid rgba(148, 163, 184, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            color: #e2e8f0;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .nav-button:hover {
            background: rgba(51, 65, 85, 0.8);
            border-color: rgba(148, 163, 184, 0.4);
            transform: translateY(-2px);
        }

        .logout-btn {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.3);
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.4);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Hero Section */
        .hero {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 24px;
            padding: 3rem;
            text-align: center;
            margin-bottom: 3rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .hero h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.125rem;
            color: #94a3b8;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Mode Cards Grid */
        .modes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .mode-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 20px;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .mode-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1));
            opacity: 0;
            transition: opacity 0.4s ease;
            pointer-events: none;
        }

        .mode-card:hover {
            transform: translateY(-8px);
            border-color: rgba(96, 165, 250, 0.4);
            box-shadow: 0 20px 40px rgba(96, 165, 250, 0.2);
        }

        .mode-card:hover::before {
            opacity: 1;
        }

        .mode-icon {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            transition: transform 0.4s ease;
        }

        .mode-card:hover .mode-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .mode-card.blue .mode-icon {
            background: linear-gradient(135deg, #3b82f6, #60a5fa);
        }

        .mode-card.green .mode-icon {
            background: linear-gradient(135deg, #10b981, #34d399);
        }

        .mode-card.orange .mode-icon {
            background: linear-gradient(135deg, #f59e0b, #fbbf24);
        }

        .mode-card.purple .mode-icon {
            background: linear-gradient(135deg, #8b5cf6, #a78bfa);
        }

        .mode-card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: #fff;
        }

        .mode-card p {
            font-size: 0.875rem;
            color: #94a3b8;
            line-height: 1.6;
            margin-bottom: 1.25rem;
        }

        .mode-badge {
            display: inline-block;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .mode-card.blue .mode-badge {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .mode-card.green .mode-badge {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        .mode-card.orange .mode-badge {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        .mode-card.purple .mode-badge {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(51, 65, 85, 0.5);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 1rem;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #60a5fa);
            border-radius: 3px;
            transition: width 1s ease;
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 1.75rem;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: flex-start;
            gap: 1.25rem;
            min-height: 140px;
        }

        .stat-icon {
            font-size: 2.5rem;
            flex-shrink: 0;
            width: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .stat-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
            flex: 1;
        }

        .stat-content h4 {
            font-size: 0.875rem;
            color: #94a3b8;
            margin-bottom: 0.625rem;
            font-weight: 500;
            line-height: 1.2;
        }

        .stat-content .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .stat-content .stat-desc {
            font-size: 0.75rem;
            color: #64748b;
            line-height: 1.4;
        }

        /* Quick Actions */
        .quick-actions {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 20px;
            padding: 2rem;
        }

        .quick-actions h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .action-btn {
            background: rgba(51, 65, 85, 0.6);
            border: 1px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            padding: 1rem;
            color: #e2e8f0;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .action-btn:hover {
            background: rgba(51, 65, 85, 0.8);
            border-color: rgba(148, 163, 184, 0.4);
            transform: translateY(-2px);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .hero {
                padding: 2rem 1.5rem;
            }

            .hero h1 {
                font-size: 1.75rem;
            }

            .hero p {
                font-size: 1rem;
            }

            .modes-grid {
                grid-template-columns: 1fr;
            }

            .top-nav {
                padding: 1rem;
            }

            .nav-button span {
                display: none;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .mode-card, .stat-card, .quick-actions {
            animation: fadeInUp 0.6s ease forwards;
        }

        .mode-card:nth-child(1) { animation-delay: 0.1s; }
        .mode-card:nth-child(2) { animation-delay: 0.2s; }
        .mode-card:nth-child(3) { animation-delay: 0.3s; }
        .mode-card:nth-child(4) { animation-delay: 0.4s; }
    </style>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <a href="index.html" class="logo">
            <img src="images/textLogo.png" alt="GoDrive">
        </a>
        <div class="nav-right">
            <button class="nav-button" id="languageBtn">
                <span>üåê</span>
                <span id="currentLangText">O'zbekcha</span>
            </button>
            <button class="nav-button" id="profileBtn">
                <span>üë§</span>
                <span data-translate="profile">Profil</span>
            </button>
            <button class="nav-button logout-btn" id="logoutBtn">
                <span>üö™</span>
                <span data-translate="logout">Chiqish</span>
            </button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <div class="hero">
            <h1><span data-translate="welcome">Xush kelibsiz</span>, <span id="userName">Akmal</span>!</h1>
            <p data-translate="heroDesc">Haydovchilik imtihonini mukammal egallashga tayyormisiz? O'zingizga mos ta'lim rejimini tanlang va muvaffaqiyatga yo'l oching.</p>
        </div>

        <!-- Mode Cards -->
        <div class="modes-grid">
            <!-- Practice Tickets -->
            <div class="mode-card blue" id="practiceTicketsCard">
                <div class="mode-icon">üìö</div>
                <h3 data-translate="practiceTickets">Imtihon Biletlari</h3>
                <p data-translate="practiceTicketsDesc">Tizimli o'rganish uchun tashkil etilgan 113 ta rasmiy imtihon biletlari</p>
                <div class="mode-badge"><span data-translate="completed">Bajarildi</span>: <span id="ticketsProgress">0/113</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="ticketsProgressBar" style="width: 0%;"></div>
                </div>
            </div>

            <!-- Exam Mode -->
            <div class="mode-card green" id="examModeCard">
                <div class="mode-icon">üéØ</div>
                <h3 data-translate="examMode">Imtihon Rejimi</h3>
                <p data-translate="examModeDesc">20 ta tasodifiy savol bilan haqiqiy imtihon simulyatsiyasi</p>
                <div class="mode-badge"><span data-translate="lastScore">Oxirgi natija</span>: 18/20</div>
                <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.5rem;"><span data-translate="minutes">‚è±Ô∏è 20 daqiqa</span></div>
            </div>

            <!-- Rapid Mode -->
            <div class="mode-card orange" id="rapidModeCard">
                <div class="mode-icon">‚ö°</div>
                <h3 data-translate="rapidMode">Tezkor Rejim</h3>
                <p data-translate="rapidModeDesc">Barcha 1130 ta savol ketma-ket tartibda</p>
                <div class="mode-badge"><span data-translate="done">Bajarildi</span>: 450/1130</div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%; background: linear-gradient(90deg, #f59e0b, #fbbf24);"></div>
                </div>
            </div>

            <!-- Random Rapid -->
            <div class="mode-card purple" id="randomRapidCard">
                <div class="mode-icon">üé≤</div>
                <h3 data-translate="randomRapid">Tasodifiy Tezkor</h3>
                <p data-translate="randomRapidDesc">Xilma-xillik uchun tasodifiy tartibda barcha savollar</p>
                <div class="mode-badge" data-translate="challengeMode">Qiyin Rejim</div>
                <div style="font-size: 0.75rem; color: #64748b; margin-top: 0.5rem;" data-translate="shuffled">üîÄ Aralash tartib</div>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-content">
                    <h4 data-translate="overallAccuracy">Umumiy Aniqlik</h4>
                    <div id="accuracyValue" class="stat-value" style="color: #10b981;">0%</div>
                    <div id="accuracyDesc" class="stat-desc" data-translate="accuracyDesc">0 ta javob berilgan savollar asosida</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">‚è∞</div>
                <div class="stat-content">
                    <h4 data-translate="studyTime">O'rganish Vaqti</h4>
                    <div id="timeValue" class="stat-value" style="color: #60a5fa;">0—á 0–º</div>
                    <div class="stat-desc" data-translate="studyTimeDesc">Jami o'rganish vaqti</div>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon">üìÖ</div>
                <div class="stat-content">
                    <h4 data-translate="joinDate">Platformada</h4>
                    <div id="daysValue" class="stat-value" style="color: #f59e0b;">0 <span data-translate="days">kun</span></div>
                    <div class="stat-desc" data-translate="joinDateDesc">Ro'yxatdan o'tganingizdan beri</div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h2 data-translate="quickActions">Tezkor Harakatlar</h2>
            <div class="actions-grid">
                <button class="action-btn" onclick="alert(translations[currentLang].comingSoon)">
                    <span>‚Üª</span>
                    <span data-translate="resumeSession">Oxirgi Seansni Davom Ettirish</span>
                </button>
                <button class="action-btn" onclick="alert(translations[currentLang].comingSoon)">
                    <span>‚≠ê</span>
                    <span data-translate="reviewFavorites">Sevimlilarni Ko'rib Chiqish</span>
                </button>
                <button class="action-btn" onclick="alert(translations[currentLang].comingSoon)">
                    <span>‚ùå</span>
                    <span data-translate="wrongAnswers">Noto'g'ri Javoblar</span>
                </button>
                <button class="action-btn" onclick="alert(translations[currentLang].comingSoon)">
                    <span>‚öôÔ∏è</span>
                    <span data-translate="settings">Sozlamalar</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Translations
        const translations = {
            uz: {
                currentLang: "O'zbekcha",
                profile: "Profil",
                logout: "Chiqish",
                welcome: "Xush kelibsiz",
                heroDesc: "Haydovchilik imtihonini mukammal egallashga tayyormisiz? O'zingizga mos ta'lim rejimini tanlang va muvaffaqiyatga yo'l oching.",
                practiceTickets: "Biletlar",
                practiceTicketsDesc: "Tizimli o'rganish uchun tashkil etilgan 113 ta rasmiy imtihon biletlari",
                completed: "Bajarildi",
                examMode: "Imtihon",
                examModeDesc: "20 ta tasodifiy savol bilan haqiqiy imtihon simulyatsiyasi",
                lastScore: "Oxirgi natija",
                minutes: "‚è±Ô∏è 20 daqiqa",
                rapidMode: "Rapid",
                rapidModeDesc: "Barcha 1130 ta savol ketma-ket tartibda",
                done: "Bajarildi",
                randomRapid: "Tasodifiy Rapid",
                randomRapidDesc: "Xilma-xillik uchun tasodifiy tartibda barcha savollar",
                challengeMode: "Qiyin Rejim",
                shuffled: "üîÄ Aralash tartib",
                overallAccuracy: "Umumiy Aniqlik",
                accuracyDesc: "1,247 ta javob berilgan savollar asosida",
                studyTime: "O'rganish Vaqti",
                studyTimeDesc: "Jami o'rganish vaqti",
                joinDate: "Platformada",
                days: "kun",
                joinDateDesc: "Biz bilansiz",
                quickActions: "Tezkor Harakatlar",
                resumeSession: "Oxirgi Seansni Davom Ettirish",
                reviewFavorites: "Sevimlilarni Ko'rib Chiqish",
                wrongAnswers: "Noto'g'ri Javoblar",
                settings: "Sozlamalar",
                comingSoon: "Tez orada!"
            },
            ru: {
                currentLang: "–†—É—Å—Å–∫–∏–π",
                profile: "–ü—Ä–æ—Ñ–∏–ª—å",
                logout: "–í—ã–π—Ç–∏",
                welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å",
                heroDesc: "–ì–æ—Ç–æ–≤—ã –æ—Å–≤–æ–∏—Ç—å —ç–∫–∑–∞–º–µ–Ω –ø–æ –≤–æ–∂–¥–µ–Ω–∏—é? –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Ä–µ–∂–∏–º –æ–±—É—á–µ–Ω–∏—è –∏ –Ω–∞—á–Ω–∏—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∫ —É—Å–ø–µ—Ö—É.",
                practiceTickets: "–ë–∏–ª–µ—Ç—ã",
                practiceTicketsDesc: "113 –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö —ç–∫–∑–∞–º–µ–Ω–∞—Ü–∏–æ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ –¥–ª—è —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è",
                completed: "–ó–∞–≤–µ—Ä—à–µ–Ω–æ",
                examMode: "–≠–∫–∑–∞–º–µ–Ω",
                examModeDesc: "–†–µ–∞–ª—å–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —ç–∫–∑–∞–º–µ–Ω–∞ —Å 20 —Å–ª—É—á–∞–π–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏",
                lastScore: "–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç",
                minutes: "‚è±Ô∏è 20 –º–∏–Ω—É—Ç",
                rapidMode: "–†–∞–ø–∏–¥",
                rapidModeDesc: "–í—Å–µ 1130 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ",
                done: "–í—ã–ø–æ–ª–Ω–µ–Ω–æ",
                randomRapid: "–°–ª—É—á–∞–π–Ω—ã–π –†–∞–ø–∏–¥",
                randomRapidDesc: "–í—Å–µ –≤–æ–ø—Ä–æ—Å—ã –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è",
                challengeMode: "–†–µ–∂–∏–º –ò—Å–ø—ã—Ç–∞–Ω–∏—è",
                shuffled: "üîÄ –ü–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫",
                overallAccuracy: "–û–±—â–∞—è –¢–æ—á–Ω–æ—Å—Ç—å",
                accuracyDesc: "–ù–∞ –æ—Å–Ω–æ–≤–µ 1,247 –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤",
                studyTime: "–í—Ä–µ–º—è –û–±—É—á–µ–Ω–∏—è",
                studyTimeDesc: "–û–±—â–µ–µ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è",
                joinDate: "–ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ",
                days: "–¥–Ω–µ–π",
                joinDateDesc: "–í—ã —Å –Ω–∞–º–∏",
                quickActions: "–ë—ã—Å—Ç—Ä—ã–µ –î–µ–π—Å—Ç–≤–∏—è",
                resumeSession: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –°–µ—Å—Å–∏—é",
                reviewFavorites: "–ü—Ä–æ—Å–º–æ—Ç—Ä –ò–∑–±—Ä–∞–Ω–Ω–æ–≥–æ",
                wrongAnswers: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –û—Ç–≤–µ—Ç—ã",
                settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
                comingSoon: "–°–∫–æ—Ä–æ!"
            },
            uzk: {
                currentLang: "–é–∑–±–µ–∫—á–∞",
                profile: "–ü—Ä–æ—Ñ–∏–ª",
                logout: "–ß–∏“õ–∏—à",
                welcome: "–•—É—à –∫–µ–ª–∏–±—Å–∏–∑",
                heroDesc: "“≤–∞–π–¥–æ–≤—á–∏–ª–∏–∫ –∏–º—Ç–∏“≥–æ–Ω–∏–Ω–∏ –º—É–∫–∞–º–º–∞–ª —ç–≥–∞–ª–ª–∞—à–≥–∞ —Ç–∞–π—ë—Ä–º–∏—Å–∏–∑? –é–∑–∏–Ω–≥–∏–∑–≥–∞ –º–æ—Å —Ç–∞—ä–ª–∏–º —Ä–µ–∂–∏–º–∏–Ω–∏ —Ç–∞–Ω–ª–∞–Ω–≥ –≤–∞ –º—É–≤–∞—Ñ—Ñ–∞“õ–∏—è—Ç–≥–∞ –π—û–ª –æ—á–∏–Ω–≥.",
                practiceTickets: "–ë–∏–ª–µ—Ç–ª–∞—Ä",
                practiceTicketsDesc: "–¢–∏–∑–∏–º–ª–∏ —û—Ä–≥–∞–Ω–∏—à —É—á—É–Ω —Ç–∞—à–∫–∏–ª —ç—Ç–∏–ª–≥–∞–Ω 113 —Ç–∞ —Ä–∞—Å–º–∏–π –∏–º—Ç–∏“≥–æ–Ω –±–∏–ª–µ—Ç–ª–∞—Ä–∏",
                completed: "–ë–∞–∂–∞—Ä–∏–ª–¥–∏",
                examMode: "–ò–º—Ç–∏“≥–æ–Ω",
                examModeDesc: "20 —Ç–∞ —Ç–∞—Å–æ–¥–∏—Ñ–∏–π —Å–∞–≤–æ–ª –±–∏–ª–∞–Ω “≥–∞“õ–∏“õ–∏–π –∏–º—Ç–∏“≥–æ–Ω —Å–∏–º—É–ª—è—Ü–∏—è—Å–∏",
                lastScore: "–û—Ö–∏—Ä–≥–∏ –Ω–∞—Ç–∏–∂–∞",
                minutes: "‚è±Ô∏è 20 –¥–∞“õ–∏“õ–∞",
                rapidMode: "–†–∞–ø–∏–¥",
                rapidModeDesc: "–ë–∞—Ä—á–∞ 1130 —Ç–∞ —Å–∞–≤–æ–ª –∫–µ—Ç–º–∞-–∫–µ—Ç —Ç–∞—Ä—Ç–∏–±–¥–∞",
                done: "–ë–∞–∂–∞—Ä–∏–ª–¥–∏",
                randomRapid: "–¢–∞—Å–æ–¥–∏—Ñ–∏–π –†–∞–ø–∏–¥",
                randomRapidDesc: "–•–∏–ª–º–∞-—Ö–∏–ª–ª–∏–∫ —É—á—É–Ω —Ç–∞—Å–æ–¥–∏—Ñ–∏–π —Ç–∞—Ä—Ç–∏–±–¥–∞ –±–∞—Ä—á–∞ —Å–∞–≤–æ–ª–ª–∞—Ä",
                challengeMode: "“ö–∏–π–∏–Ω –†–µ–∂–∏–º",
                shuffled: "üîÄ –ê—Ä–∞–ª–∞—à —Ç–∞—Ä—Ç–∏–±",
                overallAccuracy: "–£–º—É–º–∏–π –ê–Ω–∏“õ–ª–∏–∫",
                accuracyDesc: "1,247 —Ç–∞ –∂–∞–≤–æ–± –±–µ—Ä–∏–ª–≥–∞–Ω —Å–∞–≤–æ–ª–ª–∞—Ä –∞—Å–æ—Å–∏–¥–∞",
                studyTime: "–é—Ä–≥–∞–Ω–∏—à –í–∞“õ—Ç–∏",
                studyTimeDesc: "–ñ–∞–º–∏ —û—Ä–≥–∞–Ω–∏—à –≤–∞“õ—Ç–∏",
                joinDate: "–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞–¥–∞",
                days: "–∫—É–Ω",
                joinDateDesc: "–ë–∏–∑ –±–∏–ª–∞–Ω—Å–∏–∑",
                quickActions: "–¢–µ–∑–∫–æ—Ä “≤–∞—Ä–∞–∫–∞—Ç–ª–∞—Ä",
                resumeSession: "–û—Ö–∏—Ä–≥–∏ –°–µ–∞–Ω—Å–Ω–∏ –î–∞–≤–æ–º –ï—Ç—Ç–∏—Ä–∏—à",
                reviewFavorites: "–°–µ–≤–∏–º–ª–∏–ª–∞—Ä–Ω–∏ –ö—û—Ä–∏–± –ß–∏“õ–∏—à",
                wrongAnswers: "–ù–æ—Ç—û“ì—Ä–∏ –ñ–∞–≤–æ–±–ª–∞—Ä",
                settings: "–°–æ–∑–ª–∞–º–∞–ª–∞—Ä",
                comingSoon: "–¢–µ–∑ –æ—Ä–∞–¥–∞!"
            }
        };

        // Current language
        let currentLang = localStorage.getItem('language') || 'uz';

        // Function to update all translations
        function updateLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);

            // Update all elements with data-translate attribute
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // Update current language button text
            document.getElementById('currentLangText').textContent = translations[lang].currentLang;

            // Update user name in hero
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const userName = currentUser.name || currentUser.username || 'User';
            document.getElementById('userName').textContent = userName;
        }

        // Check authentication
        const token = localStorage.getItem('authToken');
        if (!token) {
            window.location.href = 'login.html';
        }

        // Load user statistics
        async function loadUserStats() {
            try {
                const token = localStorage.getItem('authToken');
                if (!token) return;

                const response = await fetch('/api/stats', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    const stats = result.data;
                    
                    console.log('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞:', stats);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–æ—á–Ω–æ—Å—Ç—å
                    const accuracyValue = document.getElementById('accuracyValue');
                    if (accuracyValue) {
                        accuracyValue.textContent = `${stats.accuracy}%`;
                        
                        // –ú–µ–Ω—è–µ–º —Ü–≤–µ—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏
                        if (stats.accuracy >= 90) {
                            accuracyValue.style.color = '#10b981'; // –∑–µ–ª—ë–Ω—ã–π
                        } else if (stats.accuracy >= 70) {
                            accuracyValue.style.color = '#f59e0b'; // –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                        } else {
                            accuracyValue.style.color = '#ef4444'; // –∫—Ä–∞—Å–Ω—ã–π
                        }
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏
                    const accuracyDesc = document.getElementById('accuracyDesc');
                    if (accuracyDesc) {
                        const descTranslations = {
                            uz: `${stats.totalQuestionsAnswered} ta javob berilgan savollar asosida`,
                            ru: `–ù–∞ –æ—Å–Ω–æ–≤–µ ${stats.totalQuestionsAnswered} –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤`,
                            uzk: `${stats.totalQuestionsAnswered} —Ç–∞ –∂–∞–≤–æ–± –±–µ—Ä–∏–ª–≥–∞–Ω —Å–∞–≤–æ–ª–ª–∞—Ä –∞—Å–æ—Å–∏–¥–∞`
                        };
                        accuracyDesc.textContent = descTranslations[currentLang] || descTranslations.uz;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è
                    const timeValue = document.getElementById('timeValue');
                    if (timeValue) {
                        timeValue.textContent = stats.timeSpentFormatted;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
                    const daysValue = document.getElementById('daysValue');
                    if (daysValue && stats.daysSinceJoin !== undefined) {
                        const daysTranslations = {
                            uz: 'kun',
                            ru: stats.daysSinceJoin === 1 ? '–¥–µ–Ω—å' : (stats.daysSinceJoin < 5 ? '–¥–Ω—è' : '–¥–Ω–µ–π'),
                            uzk: '–∫—É–Ω'
                        };
                        daysValue.innerHTML = `${stats.daysSinceJoin} <span data-translate="days">${daysTranslations[currentLang]}</span>`;
                    }
                    
                } else {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', response.status);
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }

        // Load tickets progress
        async function loadTicketsProgress() {
            try {
                const token = localStorage.getItem('authToken');
                if (!token) return;

                const response = await fetch('/api/progress', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const result = await response.json();
                    const progressData = result.data;
                    
                    console.log('üé´ –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∏–ª–µ—Ç–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω:', progressData);
                    
                    // –°—á–∏—Ç–∞–µ–º –±–∏–ª–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Ü–≤–µ—Ç–Ω—ã–º–∏ –≤ dashboard
                    // –≠—Ç–æ –±–∏–ª–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ª–∏–±–æ –∑–∞–≤–µ—Ä—à–µ–Ω—ã (completed=true), 
                    // –ª–∏–±–æ –∏–º–µ—é—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ü–≤–µ—Ç–Ω—ã–º–∏ –≤ dashboard)
                    let completedCount = 0;
                    const coloredTickets = [];
                    
                    if (progressData.progress && Array.isArray(progressData.progress)) {
                        progressData.progress.forEach(item => {
                            // –ë–∏–ª–µ—Ç —Å—á–∏—Ç–∞–µ—Ç—Å—è "–ø—Ä–æ–π–¥–µ–Ω–Ω—ã–º" –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è, –µ—Å–ª–∏:
                            // 1. completed = true –ò–õ–ò
                            // 2. –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –æ—Ç–≤–µ—Ç (answers –Ω–µ –ø—É—Å—Ç–æ–π)
                            const hasAnswers = item.answers && Object.keys(item.answers).length > 0;
                            if (item.completed || hasAnswers) {
                                completedCount++;
                                coloredTickets.push({
                                    id: item.ticket_id,
                                    completed: item.completed,
                                    answersCount: hasAnswers ? Object.keys(item.answers).length : 0
                                });
                            }
                        });
                    }
                    
                    const totalTickets = 113;
                    const percentage = Math.round((completedCount / totalTickets) * 100);
                    
                    console.log(`üìä –ü—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ (—Å –æ—Ç–≤–µ—Ç–∞–º–∏): ${completedCount}/${totalTickets}`);
                    console.log('üìã –¶–≤–µ—Ç–Ω—ã–µ –±–∏–ª–µ—Ç—ã:', coloredTickets);
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º badge
                    const ticketsProgress = document.getElementById('ticketsProgress');
                    if (ticketsProgress) {
                        ticketsProgress.textContent = `${completedCount}/${totalTickets}`;
                    }
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º progress bar
                    const progressBar = document.getElementById('ticketsProgressBar');
                    if (progressBar) {
                        progressBar.style.width = `${percentage}%`;
                    }
                    
                } else {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–∏–ª–µ—Ç–æ–≤:', response.status);
                }
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –±–∏–ª–µ—Ç–æ–≤:', error);
            }
        }

        // Initialize on page load
        window.addEventListener('DOMContentLoaded', () => {
            // Get user info
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            const userName = currentUser.name || currentUser.username || 'User';
            document.getElementById('userName').textContent = userName;

            // Apply saved language
            updateLanguage(currentLang);

            // Load user statistics and tickets progress
            loadUserStats();
            loadTicketsProgress();

            // Animate progress bars (delayed to allow data to load first)
            setTimeout(() => {
                document.querySelectorAll('.progress-fill').forEach(bar => {
                    const width = bar.style.width;
                    const originalWidth = width;
                    bar.style.width = '0';
                    setTimeout(() => {
                        bar.style.width = originalWidth;
                    }, 100);
                });
            }, 300);

            // Mode card click handlers
            document.getElementById('practiceTicketsCard').addEventListener('click', () => {
                window.location.href = 'dashboard.html';
            });

            document.getElementById('examModeCard').addEventListener('click', () => {
                alert(translations[currentLang].comingSoon);
            });

            document.getElementById('rapidModeCard').addEventListener('click', () => {
                alert(translations[currentLang].comingSoon);
            });

            document.getElementById('randomRapidCard').addEventListener('click', () => {
                alert(translations[currentLang].comingSoon);
            });
        });

        // Logout handler
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('authToken');
            localStorage.removeItem('currentUser');
            window.location.href = 'login.html';
        });

        // Profile handler
        document.getElementById('profileBtn').addEventListener('click', () => {
            window.location.href = 'profile.html';
        });

        // Language switcher with dropdown
        let languageMenuOpen = false;
        document.getElementById('languageBtn').addEventListener('click', (e) => {
            e.stopPropagation();
            
            // Remove existing dropdown if any
            const existingDropdown = document.querySelector('.language-dropdown-menu');
            if (existingDropdown) {
                existingDropdown.remove();
                languageMenuOpen = false;
                return;
            }

            // Create dropdown menu
            const dropdown = document.createElement('div');
            dropdown.className = 'language-dropdown-menu';
            dropdown.style.cssText = `
                position: absolute;
                top: 100%;
                right: 0;
                margin-top: 0.5rem;
                background: rgba(30, 41, 59, 0.95);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(148, 163, 184, 0.2);
                border-radius: 12px;
                padding: 0.5rem;
                min-width: 150px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                z-index: 1000;
            `;

            const languages = [
                { code: 'uz', name: "O'zbekcha", flag: 'üá∫üáø' },
                { code: 'ru', name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
                { code: 'uzk', name: '–é–∑–±–µ–∫—á–∞', flag: 'üá∫üáø' }
            ];

            languages.forEach(({ code, name, flag }) => {
                const btn = document.createElement('button');
                btn.textContent = `${flag} ${name}`;
                btn.style.cssText = `
                    width: 100%;
                    padding: 0.75rem 1rem;
                    background: ${currentLang === code ? 'rgba(59, 130, 246, 0.2)' : 'transparent'};
                    border: none;
                    border-radius: 8px;
                    color: #e2e8f0;
                    font-size: 0.875rem;
                    font-weight: ${currentLang === code ? '600' : '400'};
                    cursor: pointer;
                    transition: all 0.2s ease;
                    text-align: left;
                    font-family: 'Inter', sans-serif;
                `;
                
                btn.addEventListener('mouseenter', () => {
                    if (currentLang !== code) {
                        btn.style.background = 'rgba(51, 65, 85, 0.6)';
                    }
                });
                
                btn.addEventListener('mouseleave', () => {
                    if (currentLang !== code) {
                        btn.style.background = 'transparent';
                    }
                });

                btn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    updateLanguage(code);
                    dropdown.remove();
                    languageMenuOpen = false;
                });

                dropdown.appendChild(btn);
            });

            // Position relative to language button
            const languageBtn = document.getElementById('languageBtn');
            languageBtn.style.position = 'relative';
            languageBtn.appendChild(dropdown);
            languageMenuOpen = true;
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            if (languageMenuOpen) {
                const dropdown = document.querySelector('.language-dropdown-menu');
                if (dropdown) {
                    dropdown.remove();
                    languageMenuOpen = false;
                }
            }
        });
    </script>
</body>
</html>
