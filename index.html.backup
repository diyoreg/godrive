<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GoDrive - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #1e3a8a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            max-width: 1600px;
            width: 100%;
            margin: 0 auto;
        }

        /* Header —Å—Ç–∏–ª–∏ */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
        }

        .header h1 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: white;
            font-size: 24px;
            font-weight: 600;
        }

        .header-logo {
            height: 40px;
            filter: brightness(0) invert(1);
            opacity: 0.9;
            cursor: pointer;
            transition: opacity 0.2s ease;
        }

        .header-logo:hover {
            opacity: 1;
        }

        .header-separator {
            color: rgba(255, 255, 255, 0.3);
        }

        .header-actions {
            display: flex !important;
            gap: 12px !important;
            align-items: center !important;
            flex-direction: row !important;
        }

        .header-actions button:not(.lang-btn):not(.globe-btn) {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .header-actions button:not(.lang-btn):hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(96, 165, 250, 0.5);
        }

        .nav-btn.active {
            background: #60a5fa !important;
            border-color: #60a5fa !important;
            color: white !important;
            cursor: default;
            pointer-events: none;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.2) !important;
            border-color: rgba(239, 68, 68, 0.5) !important;
        }

        /* Welcome section */
        .welcome-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 60px 30px;
            margin-bottom: 40px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .welcome-message {
            color: white;
            font-size: 32px;
            font-weight: 600;
            margin: 0;
            text-align: center;
        }

        #userDisplayName {
            color: #60a5fa;
        }

        /* Stats section - hidden for now */
        .stats-section {
            display: none;
        }

        /* Progress bar - hidden for now */
        .progress-container {
            display: none;
        }

        .modes-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-top: 40px;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .mode-card:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(96, 165, 250, 0.5);
            transform: translateY(-4px);
        }

        .mode-card.active {
            cursor: pointer;
        }

        .mode-card.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .mode-card.disabled:hover {
            transform: none;
            background: rgba(255, 255, 255, 0.05);
        }

        .mode-icon {
            width: 48px;
            height: 48px;
            background: rgba(96, 165, 250, 0.15);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .mode-title {
            color: #60a5fa;
            font-size: 20px;
            font-weight: 600;
        }

        .mode-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 13px;
            line-height: 1.5;
            flex-grow: 1;
        }

        .mode-button {
            background: #60a5fa;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Montserrat', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .mode-button:hover {
            background: #3b82f6;
        }

        .mode-card.disabled .mode-button {
            background: rgba(96, 165, 250, 0.3);
            cursor: not-allowed;
        }

        .mode-card.disabled .mode-button:hover {
            background: rgba(96, 165, 250, 0.3);
        }

        @media (max-width: 1200px) {
            .modes-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .stats-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .modes-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                flex-direction: column;
                gap: 16px;
            }
            
            .stats-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>
                <img src="images/textLogo.png" alt="GoDrive" class="header-logo">
            </h1>
            <div class="header-actions">
                <div class="language-dropdown">
                    <button class="globe-btn" id="globeBtn">üåê</button>
                    <div class="language-switcher" id="langSwitcher">
                        <button class="lang-btn active" data-lang="uz">O'zbekcha</button>
                        <button class="lang-btn" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
                        <button class="lang-btn" data-lang="uzk">–é–∑–±–µ–∫—á–∞</button>
                    </div>
                </div>
                <button class="nav-btn active" data-translate="mainTitle">–ì–ª–∞–≤–Ω–∞—è</button>
                <button id="profileBtn" class="profile-btn" data-translate="profile">–ü—Ä–æ—Ñ–∏–ª—å</button>
                <button id="adminBtn" class="admin-btn" data-translate="adminPanel" style="display: none;">–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</button>
                <button id="logoutBtn" class="logout-btn" data-translate="logout">–í—ã–π—Ç–∏</button>
            </div>
        </header>
        
        <!-- Welcome Section -->
        <div class="welcome-section">
            <h2 class="welcome-message">
                <span data-translate="welcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</span>, 
                <span id="userDisplayName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>!
            </h2>
        </div>

        <!-- –ú–æ–¥–µ—Å Grid -->
        <div class="modes-grid">
            <!-- –ë–∏–ª–µ—Ç—ã -->
            <div class="mode-card active">
                <div class="mode-icon">üìù</div>
                <h2 class="mode-title" data-translate="ticketsTitle">–ë–∏–ª–µ—Ç—ã</h2>
                <p class="mode-description" data-translate="ticketsDesc">
                    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è —Å –±–∏–ª–µ—Ç–∞–º–∏ –ø–æ –ü–î–î. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –±–∏–ª–µ—Ç–∞–º –∏ –±—É–¥—å—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã –∫ —ç–∫–∑–∞–º–µ–Ω—É.
                </p>
                <button class="mode-button" id="ticketsButton">
                    <span data-translate="ticketsButton">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ë–∏–ª–µ—Ç—ã</span>
                    <span>‚Üí</span>
                </button>
            </div>

            <!-- –†–µ–∂–∏–º –≠–∫–∑–∞–º–µ–Ω–∞ -->
            <div class="mode-card disabled">
                <div class="mode-icon">üõ°Ô∏è</div>
                <h2 class="mode-title" data-translate="examTitle">–†–µ–∂–∏–º –≠–∫–∑–∞–º–µ–Ω–∞</h2>
                <p class="mode-description" data-translate="examDesc">
                    –ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞. 20 —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, 25 –º–∏–Ω—É—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è.
                </p>
                <button class="mode-button">
                    <span data-translate="examButton">–ü–µ—Ä–µ–π—Ç–∏ –∫ –≠–∫–∑–∞–º–µ–Ω—É</span>
                    <span>‚Üí</span>
                </button>
            </div>

            <!-- –ú–æ–∏ –û—à–∏–±–∫–∏ -->
            <div class="mode-card disabled">
                <div class="mode-icon">üîÑ</div>
                <h2 class="mode-title" data-translate="errorsTitle">–ú–æ–∏ –û—à–∏–±–∫–∏</h2>
                <p class="mode-description" data-translate="errorsDesc">
                    –†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ –≤–æ–ø—Ä–æ—Å–∞–º–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ —É–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Å–ø–∏—Å–∫–∞.
                </p>
                <button class="mode-button">
                    <span data-translate="errorsButton">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –û—à–∏–±–∫–∏</span>
                    <span>‚Üí</span>
                </button>
            </div>

            <!-- –í—Å–µ –í–æ–ø—Ä–æ—Å—ã -->
            <div class="mode-card disabled">
                <div class="mode-icon">üìö</div>
                <h2 class="mode-title" data-translate="allQuestionsTitle">–í—Å–µ –í–æ–ø—Ä–æ—Å—ã</h2>
                <p class="mode-description" data-translate="allQuestionsDesc">
                    –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —ç–∫–∑–∞–º–µ–Ω–∞. –ò–∑—É—á–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —É–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–π —Ç–µ–º–µ.
                </p>
                <button class="mode-button">
                    <span data-translate="allQuestionsButton">–í—Å–µ –í–æ–ø—Ä–æ—Å—ã</span>
                    <span>‚Üí</span>
                </button>
            </div>

            <!-- –ü—Ä–∞–≤–∏–ª–∞ –∏ –°–æ–≤–µ—Ç—ã -->
            <div class="mode-card disabled">
                <div class="mode-icon">üìñ</div>
                <h2 class="mode-title" data-translate="rulesTitle">–ü—Ä–∞–≤–∏–ª–∞ –∏ –°–æ–≤–µ—Ç—ã</h2>
                <p class="mode-description" data-translate="rulesDesc">
                    –í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ü–î–î, —Ç–∞–±–ª–∏—Ü–∞ —à—Ç—Ä–∞—Ñ–æ–≤ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω—É.
                </p>
                <button class="mode-button">
                    <span data-translate="rulesButton">–£–∑–Ω–∞—Ç—å –ë–æ–ª—å—à–µ</span>
                    <span>‚Üí</span>
                </button>
            </div>
        </div>
    </div>

    <script src="js/api-client.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // –ü–µ—Ä–µ–≤–æ–¥—ã
        const translations = {
            uz: {
                mainTitle: "Bosh sahifa",
                welcome: "Xush kelibsiz",
                profile: "Profil",
                adminPanel: "Admin panel",
                logout: "Chiqish",
                completedTickets: "O'tilgan biletlar",
                averageScore: "O'rtacha ball",
                timeSpent: "Sarflangan daqiqalar",
                ticketsTitle: "Biletlar",
                ticketsDesc: "YHQ bo'yicha biletlar bilan bilimingizni tekshiring. Biletlar bo'yicha jarayoningizni kuzatib boring va imtihonga to'liq tayyor bo'ling.",
                ticketsButton: "Biletlarni Ko'rish",
                examTitle: "Imtihon Rejimi",
                examDesc: "Haqiqiy imtihon muhitini his qiling. 20 ta tasodifiy savol, 25 daqiqa. Bilimingizni tekshiring.",
                examButton: "Imtihonga O'tish",
                errorsTitle: "Mening Xatolarim",
                errorsDesc: "Noto'g'ri javob bergan savollaringiz ustida ishlang va bilimingizni mustahkamlang. To'g'ri javob berilgan savollar ro'yxatdan o'chiriladi.",
                errorsButton: "Xatolarni Ko'rish",
                allQuestionsTitle: "Barcha Savollar",
                allQuestionsDesc: "Imtihonning barcha savollarini ko'rib chiqing. Tizimli ravishda o'rganing va har bir mavzu bo'yicha bilimingizni mustahkamlang.",
                allQuestionsButton: "Barcha Savollar",
                rulesTitle: "Qoidalar va Maslahatlar",
                rulesDesc: "Muhim YHQ qoidalari, jarimalar jadvali va imtihonga tayyorgarlik uchun foydali maslahatlar.",
                rulesButton: "Ko'proq Bilish"
            },
            ru: {
                mainTitle: "–ì–ª–∞–≤–Ω–∞—è",
                welcome: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å",
                profile: "–ü—Ä–æ—Ñ–∏–ª—å",
                adminPanel: "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å",
                logout: "–í—ã–π—Ç–∏",
                completedTickets: "–ü—Ä–æ–π–¥–µ–Ω–æ –±–∏–ª–µ—Ç–æ–≤",
                averageScore: "–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª",
                timeSpent: "–ú–∏–Ω—É—Ç –ø–æ—Ç—Ä–∞—á–µ–Ω–æ",
                ticketsTitle: "–ë–∏–ª–µ—Ç—ã",
                ticketsDesc: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è —Å –±–∏–ª–µ—Ç–∞–º–∏ –ø–æ –ü–î–î. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –±–∏–ª–µ—Ç–∞–º –∏ –±—É–¥—å—Ç–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã –∫ —ç–∫–∑–∞–º–µ–Ω—É.",
                ticketsButton: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ë–∏–ª–µ—Ç—ã",
                examTitle: "–†–µ–∂–∏–º –≠–∫–∑–∞–º–µ–Ω–∞",
                examDesc: "–ü–æ—á—É–≤—Å—Ç–≤—É–π—Ç–µ –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —ç–∫–∑–∞–º–µ–Ω–∞. 20 —Å–ª—É—á–∞–π–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, 25 –º–∏–Ω—É—Ç. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è.",
                examButton: "–ü–µ—Ä–µ–π—Ç–∏ –∫ –≠–∫–∑–∞–º–µ–Ω—É",
                errorsTitle: "–ú–æ–∏ –û—à–∏–±–∫–∏",
                errorsDesc: "–†–∞–±–æ—Ç–∞–π—Ç–µ –Ω–∞–¥ –≤–æ–ø—Ä–æ—Å–∞–º–∏, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ, –∏ —É–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è. –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Å–ø–∏—Å–∫–∞.",
                errorsButton: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –û—à–∏–±–∫–∏",
                allQuestionsTitle: "–í—Å–µ –í–æ–ø—Ä–æ—Å—ã",
                allQuestionsDesc: "–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —ç–∫–∑–∞–º–µ–Ω–∞. –ò–∑—É—á–∞–π—Ç–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ —É–∫—Ä–µ–ø–ª—è–π—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞–Ω–∏—è –ø–æ –∫–∞–∂–¥–æ–π —Ç–µ–º–µ.",
                allQuestionsButton: "–í—Å–µ –í–æ–ø—Ä–æ—Å—ã",
                rulesTitle: "–ü—Ä–∞–≤–∏–ª–∞ –∏ –°–æ–≤–µ—Ç—ã",
                rulesDesc: "–í–∞–∂–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –ü–î–î, —Ç–∞–±–ª–∏—Ü–∞ —à—Ç—Ä–∞—Ñ–æ–≤ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã –¥–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –∫ —ç–∫–∑–∞–º–µ–Ω—É.",
                rulesButton: "–£–∑–Ω–∞—Ç—å –ë–æ–ª—å—à–µ"
            },
            uzk: {
                mainTitle: "–ë–æ—à —Å–∞“≥–∏—Ñ–∞",
                welcome: "–•—É—à –∫–µ–ª–∏–±—Å–∏–∑",
                profile: "–ü—Ä–æ—Ñ–∏–ª",
                adminPanel: "–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª",
                logout: "–ß–∏“õ–∏—à",
                completedTickets: "–é—Ç–∏–ª–≥–∞–Ω –±–∏–ª–µ—Ç–ª–∞—Ä",
                averageScore: "–é—Ä—Ç–∞—á–∞ –±–∞–ª–ª",
                timeSpent: "–°–∞—Ä—Ñ–ª–∞–Ω–≥–∞–Ω –¥–∞“õ–∏“õ–∞–ª–∞—Ä",
                ticketsTitle: "–ë–∏–ª–µ—Ç–ª–∞—Ä",
                ticketsDesc: "–ô“≤“ö –±—û–π–∏—á–∞ –±–∏–ª–µ—Ç–ª–∞—Ä –±–∏–ª–∞–Ω –±–∏–ª–∏–º–∏–Ω–≥–∏–∑–Ω–∏ —Ç–µ–∫—à–∏—Ä–∏–Ω–≥. –ë–∏–ª–µ—Ç–ª–∞—Ä –±—û–π–∏—á–∞ –∂–∞—Ä–∞—ë–Ω–∏–Ω–≥–∏–∑–Ω–∏ –∫—É–∑–∞—Ç–∏–± –±–æ—Ä–∏–Ω–≥ –≤–∞ –∏–º—Ç–∏“≥–æ–Ω–≥–∞ —Ç—û–ª–∏“õ —Ç–∞–π—ë—Ä –±—û–ª–∏–Ω–≥.",
                ticketsButton: "–ë–∏–ª–µ—Ç–ª–∞—Ä–Ω–∏ –ö—û—Ä–∏—à",
                examTitle: "–ò–º—Ç–∏“≥–æ–Ω –†–µ–∂–∏–º–∏",
                examDesc: "“≤–∞“õ–∏“õ–∏–π –∏–º—Ç–∏“≥–æ–Ω –º—É“≥–∏—Ç–∏–Ω–∏ “≥–∏—Å “õ–∏–ª–∏–Ω–≥. 20 —Ç–∞ —Ç–∞—Å–æ–¥–∏—Ñ–∏–π —Å–∞–≤–æ–ª, 25 –¥–∞“õ–∏“õ–∞. –ë–∏–ª–∏–º–∏–Ω–≥–∏–∑–Ω–∏ —Ç–µ–∫—à–∏—Ä–∏–Ω–≥.",
                examButton: "–ò–º—Ç–∏“≥–æ–Ω–≥–∞ –é—Ç–∏—à",
                errorsTitle: "–ú–µ–Ω–∏–Ω–≥ –•–∞—Ç–æ–ª–∞—Ä–∏–º",
                errorsDesc: "–ù–æ—Ç—û“ì—Ä–∏ –∂–∞–≤–æ–± –±–µ—Ä–≥–∞–Ω —Å–∞–≤–æ–ª–ª–∞—Ä–∏–Ω–≥–∏–∑ —É—Å—Ç–∏–¥–∞ –∏—à–ª–∞–Ω–≥ –≤–∞ –±–∏–ª–∏–º–∏–Ω–≥–∏–∑–Ω–∏ –º—É—Å—Ç–∞“≥–∫–∞–º–ª–∞–Ω–≥. –¢—û“ì—Ä–∏ –∂–∞–≤–æ–± –±–µ—Ä–∏–ª–≥–∞–Ω —Å–∞–≤–æ–ª–ª–∞—Ä —Ä—û–π—Ö–∞—Ç–¥–∞–Ω —û—á–∏—Ä–∏–ª–∞–¥–∏.",
                errorsButton: "–•–∞—Ç–æ–ª–∞—Ä–Ω–∏ –ö—û—Ä–∏—à",
                allQuestionsTitle: "–ë–∞—Ä—á–∞ –°–∞–≤–æ–ª–ª–∞—Ä",
                allQuestionsDesc: "–ò–º—Ç–∏“≥–æ–Ω–Ω–∏–Ω–≥ –±–∞—Ä—á–∞ —Å–∞–≤–æ–ª–ª–∞—Ä–∏–Ω–∏ –∫—û—Ä–∏–± —á–∏“õ–∏–Ω–≥. –¢–∏–∑–∏–º–ª–∏ —Ä–∞–≤–∏—à–¥–∞ —û—Ä–≥–∞–Ω–∏–Ω–≥ –≤–∞ “≥–∞—Ä –±–∏—Ä –º–∞–≤–∑—É –±—û–π–∏—á–∞ –±–∏–ª–∏–º–∏–Ω–≥–∏–∑–Ω–∏ –º—É—Å—Ç–∞“≥–∫–∞–º–ª–∞–Ω–≥.",
                allQuestionsButton: "–ë–∞—Ä—á–∞ –°–∞–≤–æ–ª–ª–∞—Ä",
                rulesTitle: "“ö–æ–∏–¥–∞–ª–∞—Ä –≤–∞ –ú–∞—Å–ª–∞“≥–∞—Ç–ª–∞—Ä",
                rulesDesc: "–ú—É“≥–∏–º –ô“≤“ö “õ–æ–∏–¥–∞–ª–∞—Ä–∏, –∂–∞—Ä–∏–º–∞–ª–∞—Ä –∂–∞–¥–≤–∞–ª–∏ –≤–∞ –∏–º—Ç–∏“≥–æ–Ω–≥–∞ —Ç–∞–π—ë—Ä–≥–∞—Ä–ª–∏–∫ —É—á—É–Ω —Ñ–æ–π–¥–∞–ª–∏ –º–∞—Å–ª–∞“≥–∞—Ç–ª–∞—Ä.",
                rulesButton: "–ö—û–ø—Ä–æ“õ –ë–∏–ª–∏—à"
            }
        };

        let currentLang = localStorage.getItem('language') || 'uz';

        function updateLanguage(lang) {
            currentLang = lang;
            localStorage.setItem('language', lang);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[lang][key]) {
                    element.textContent = translations[lang][key];
                }
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.toggle('active', btn.getAttribute('data-lang') === lang);
            });

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ header
            const headerTitle = document.querySelector('.header h1 span:last-child');
            if (headerTitle) {
                headerTitle.textContent = translations[lang].mainTitle;
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', function() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            if (!window.authSystem) {
                window.authSystem = new AuthSystem();
            }

            const user = authSystem.getCurrentUser();
            if (!user) {
                window.location.href = 'login.html';
                return;
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            document.getElementById('userDisplayName').textContent = user.name || user.username;

            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω–∞, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –∞–¥–º–∏–Ω
            if (user.role === 'admin') {
                const adminBtn = document.getElementById('adminBtn');
                if (adminBtn) {
                    adminBtn.style.display = 'block';
                }
            }

            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞
            updateLanguage(currentLang);

            // Globe button dropdown toggle
            const globeBtn = document.getElementById('globeBtn');
            const langSwitcher = document.getElementById('langSwitcher');
            
            globeBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                langSwitcher.classList.toggle('show');
            });

            // Close dropdown when clicking outside
            document.addEventListener('click', (e) => {
                if (!langSwitcher.contains(e.target) && e.target !== globeBtn) {
                    langSwitcher.classList.remove('show');
                }
            });

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    updateLanguage(btn.getAttribute('data-lang'));
                    langSwitcher.classList.remove('show');
                });
            });

            // Logo navigation
            document.querySelector('.header-logo')?.addEventListener('click', () => {
                window.location.href = 'index.html';
            });

            // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.getElementById('profileBtn')?.addEventListener('click', () => {
                window.location.href = 'profile.html';
            });

            document.getElementById('adminBtn')?.addEventListener('click', () => {
                window.location.href = 'admin.html';
            });

            document.getElementById('logoutBtn')?.addEventListener('click', () => {
                authSystem.logout();
                window.location.href = 'login.html';
            });

            // Tickets button
            document.getElementById('ticketsButton')?.addEventListener('click', (e) => {
                e.stopPropagation();
                window.location.href = 'dashboard.html';
            });

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–∑–∞–≥–ª—É—à–∫–∞)
            loadUserStats();
        });

        async function loadUserStats() {
            try {
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ API
                // –ü–æ–∫–∞ –∑–∞–≥–ª—É—à–∫–∞
                document.getElementById('completedTicketsCount').textContent = '0';
                document.getElementById('averageScore').textContent = '0';
                document.getElementById('totalTimeSpent').textContent = '0';
                document.getElementById('progressBar').style.width = '0%';
                document.getElementById('progressText').textContent = '0%';
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error);
            }
        }
    </script>
</body>
</html>